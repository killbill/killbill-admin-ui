
 <header>
  <div class="kaui-container">
    <div class="row">
      <div class="d-flex align-items-center justify-content-between bg-white w-100">

        <!-- Logo -->
        <div class="d-flex align-items-center gap-2">
          <%= render 'kaui/components/logo/logo' %>
        </div>

        <!-- Search Input (only if tenant is selected) -->
        <% if tenant_selected? %>
          <div class="px-3 w-100">
            <%= render 'kaui/components/search_input/search_input' %>
          </div>
        <% end %>

        <!-- Right Section -->
        <div class="d-flex align-items-center">

          <!-- Tag-based dropdowns -->
          <%
=begin%>
 <% if user_signed_in? && tenant_selected? %>
            <div class="dropdown">
              <button class="btn btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown">
                <i class="fa fa-tags"></i>
              </button>
              <ul class="dropdown-menu">
                <li><%= link_to 'Tags', kaui_engine.tags_path, class: 'dropdown-item' %></li>
                <li><%= link_to 'Tag definitions', kaui_engine.tag_definitions_path, class: 'dropdown-item' %></li>
                <li><%= link_to 'Custom Fields', kaui_engine.custom_fields_path, class: 'dropdown-item' %></li>
              </ul>
            </div>

            <% if current_user.root? %>
              <div class="dropdown">
                <button class="btn btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown">
                  <i class="fa fa-cogs"></i>
                </button>
                <ul class="dropdown-menu">
                  <li><%= link_to 'Users', kaui_engine.admin_allowed_users_path, class: 'dropdown-item' %></li>
                  <li><%= link_to 'Tenants', kaui_engine.admin_tenants_path, class: 'dropdown-item' %></li>
                  <li><%= link_to 'Admin', kaui_engine.admin_path, class: 'dropdown-item' %></li>
                </ul>
              </div>
            <% end %>
          <% end %> 
<%
=end%>

          <!-- Settings Icon -->
          <% if user_signed_in? && session[:tenant_id].present? %>
            <%= link_to image_tag('kaui/header/cog_icon.svg', alt: 'setting'), kaui_engine.admin_tenant_path(session[:tenant_id]), class: 'p-2' %>
          <% end %>

          <!-- Logout Button -->
          <% if user_signed_in? %>
            <%= link_to image_tag('kaui/logout.svg', alt: 'logout'), kaui_engine.destroy_user_session_path, method: :delete, class: 'p-2' %>
          <% end %>

          <!-- Create Menu Dropdown -->
          <%
=begin%>
 <% if user_signed_in? && can?(:create, Kaui::Account) && tenant_selected? %>
            <%= render partial: "kaui/components/menu_dropdown/menu_dropdown", locals: {
                label: "Create...",
                icon: "kaui/plus.svg",
                dropdown_id: "createMenuDropdown",
                menu_items: [
                  { label: "Account", path: kaui_engine.new_account_path, icon: 'kaui/header/account.svg' },
                  { label: "Invoice", path: kaui_engine.invoices_path, icon: 'kaui/header/invoice.svg' },
                  { label: "Subscription", path: "#", icon: 'kaui/header/subscription.svg' },
                  { label: "Payment", path: kaui_engine.payments_path, icon: 'kaui/header/payment.svg' }
                ]
              } %>
          <% end %> 
<%
=end%>

          <!-- User Identity Display / Auth Links -->
          <%
=begin%>
 <% if user_signed_in? %>
            <div class="px-2 text-sm text-muted">
              <% if session[:kb_tenant_name].present? && session[:tenant_id].present? %>
                <%= link_to("#{current_user.kb_username} / #{session[:kb_tenant_name]}", kaui_engine.admin_tenant_path(session[:tenant_id])) %>
              <% elsif session[:kb_tenant_name].present? %>
                <%= "#{current_user.kb_username} / #{session[:kb_tenant_name]}" %>
              <% else %>
                <%= current_user.kb_username %>
              <% end %>
            </div>
          <% else %>
            <% unless Kaui.disable_sign_up_link %>
              <% unless current_page?(new_user_session_path) %>
                <%= link_to 'Login', kaui_engine.new_user_session_path, class: 'btn btn-sm btn-outline-primary' %>
              <% end %>
              <% unless current_page?(new_user_registration_path) %>
                <%= link_to 'Sign-up', kaui_engine.new_user_registration_path, class: 'btn btn-sm btn-outline-secondary' %>
              <% end %>
            <% end %>
          <% end %> 
<%
=end%>

        </div>
      </div>
    </div>
  </div>
</header>


<%
=begin%>
 <header>
    <div class="container">
        <div class="row">

            <div class="col-md-6">
                <%= link_to image_tag('kaui/logo.svg', :alt => 'Kill Bill Logo'), kaui_engine.home_path %>

                <% if user_signed_in? -%>
                <% if tenant_selected? %>
                <%= form_tag kaui_engine.search_path, :role => 'search', :id => 'searchform', :method => 'get' do %>
                <%= text_field_tag :q, '', :placeholder => 'Search' %>
                <%= submit_tag 'Search' %>
                <% end %>
                <% end %>

                <% if can?(:create, Kaui::Account) && tenant_selected? %>
                <%= link_to '<i class="fa fa-plus-square"></i>&nbsp;Create new account'.html_safe, kaui_engine.new_account_path %>
                <% end %>
                <% end %>
            </div>


            <div class="col-md-6">
                <div class="row">

                    <div id="main-menu" class="col-xs-6">

                        <% if user_signed_in? -%>
                        <div class="tag-bar tag-bar-no-border">

                            <% if tenant_selected? -%>
                            <div class="tag-select" onclick="void(0)">
                                <span><i class="fa fa-tags"></i><i class="fa fa-caret-down"></i></span>

                                <div class="tag-select-box">
                                    <%= link_to 'Tags', kaui_engine.tags_path %>
                                    <%= link_to 'Tag definitions', kaui_engine.tag_definitions_path %>
                                    <%= link_to 'Custom Fields', kaui_engine.custom_fields_path %>
                                </div>
                            </div>
                            <% end %>

                            <% if (current_user.root? && tenant_selected?) %>
                            <div class="tag-select" onclick="void(0)">
                                <span><i class="fa fa-cogs"></i><i class="fa fa-caret-down"></i></span>

                                <div class="tag-select-box">
                                    <%= link_to 'Users', kaui_engine.admin_allowed_users_path %>
                                    <%= link_to 'Tenants', kaui_engine.admin_tenants_path %>

                                    <% if current_user.root? && tenant_selected? %>
                                    <%= link_to 'Admin', kaui_engine.admin_path %>
                                    <% end %>
                                </div>
                            </div>
                            <% end %>

                        </div>
                        <% end %>

                    </div>

                    <div class="col-xs-6 text-right">
                        <nav>
                            <ul class="account-menu">
                                <% if user_signed_in? -%>
                                <li>
                                    <% if session[:kb_tenant_name].present? %>
                                    <% if session[:tenant_id].present? %>
                                    <%= link_to("#{current_user.kb_username} / #{session[:kb_tenant_name]}", kaui_engine.admin_tenant_path(session[:tenant_id])) %>
                                    <% else %>
                                    <%= "#{current_user.kb_username} / #{session[:kb_tenant_name]}" %>
                                    <% end %>
                                    <% else %>
                                    <%= current_user.kb_username %>
                                    <% end %>
                                </li>
                                <li><%= link_to 'Sign Out', kaui_engine.destroy_user_session_path, :method => :delete %></li>
                                <% else %>
                                <% unless Kaui.disable_sign_up_link %>
                                <% unless current_page?(new_user_session_path)%>
                                <li><%= link_to 'Login'.html_safe, kaui_engine.new_user_session_path %></li>
                                <% end %>
                                <% unless current_page?(new_user_registration_path)%>
                                <li><%= link_to 'Sign-up'.html_safe, kaui_engine.new_user_registration_path %></li>
                                <% end %>
                                <% end %>
                                <% end %>
                            </ul>
                        </nav>
                    </div>

                </div>
            </div>
        </div>
    </div>
</header>  
<%
=end%>


